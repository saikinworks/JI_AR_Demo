<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MindAR Transparent Video (Split Mask Shader)</title>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      a-scene {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    </style>

    <!-- A-Frame + MindAR -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  </head>

  <body>
    <a-scene
      mindar-image="imageTargetSrc: target.mind"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights, alpha:true"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
      embedded
    >
      <a-assets>
        <!-- üé• ‰∏äÂçäÂΩ©Ëâ≤Ôºå‰∏ãÂçäÈÅÆÁΩ©ÁöÑÂñÆ‰∏ÄÂΩ±Áâá -->
        <video
          id="videoSplit"
          src="myVideo_split.mp4"
          autoplay
          loop
          muted
          playsinline
          crossorigin="anonymous"
        ></video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- üéØ ÊéõËºâÁõÆÊ®ô -->
      <a-entity mindar-image-target="targetIndex: 0" rotation="-90 0 0" position="0 0 0.5">
        <a-plane
          id="videoPlane"
          width="1"
          height="1.333"
          scale="1.3 1.3 1.3"
          material="shader: video-split-shader"
        ></a-plane>
      </a-entity>
    </a-scene>

    <!-- üß© Ëá™Ë®Ç Shader -->
    <script>
      AFRAME.registerShader("video-split-shader", {
        schema: {},
        init: function () {
          const video = document.querySelector("#videoSplit");
          const tex = new THREE.VideoTexture(video);
          tex.minFilter = THREE.LinearFilter;
          tex.magFilter = THREE.LinearFilter;
          tex.format = THREE.RGBAFormat;
          tex.encoding = THREE.sRGBEncoding;

          this.material = new THREE.ShaderMaterial({
            uniforms: {
              videoTex: { value: tex },
            },
            vertexShader: `
              varying vec2 vUV;
              void main() {
                vUV = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
              }
            `,
            fragmentShader: `
              uniform sampler2D videoTex;
              varying vec2 vUV;
              void main() {
                // ‰∏äÂçäÂΩ©Ëâ≤Ôºå‰∏ãÂçäÈÅÆÁΩ©
                vec2 uvColor = vec2(vUV.x, vUV.y * 0.5 + 0.5); // ‰∏äÂçäÂΩ©Ëâ≤
                vec2 uvMask = vec2(vUV.x, vUV.y * 0.5);         // ‰∏ãÂçäÈÅÆÁΩ©
